---
import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";

interface Props {
    title: string;
    imageBasePath?: string;
    image: string;
    imageHeight?: number;
    imageDescription?: string;
}

const {
    title,
    image,
    imageHeight = 32,
    imageDescription,
}: Props = Astro.props;

const images = import.meta.glob<{ default: ImageMetadata }>("/src/assets/techicons/*.{jpeg,jpg,png,gif,svg}");
if (!images[`/src/assets/techicons/${image}`])
    throw new Error(
        `"/src/assets/techicons/${image}" does not exist in glob: "/src/assets/techicons/*.{jpeg,jpg,png,gif,svg}"`
    );

const alt = imageDescription || title;
---
<div class="flex flex-nowrap items-center justify-start p-2 border border-gray-200 rounded-lg">
    <div>
        <Image
            src={images[`/src/assets/techicons/${image}`]()}
            alt={alt}
            width={imageHeight}
            height={imageHeight}
            loading={"eager"}
        />
    </div>
    <div class="ml-2">
        <span>{title}</span>
    </div>
</div>
